<!DOCTYPE html>
<html>
<head>
  <title>Simple Blog CMS</title>
</head>
<body>

<h1>Simple Blog CMS</h1>

<!-- LOGIN -->
<div id="loginBox">
  <h3>Login</h3>
  <input id="username" placeholder="Username"><br>
  <input id="password" type="password" placeholder="Password"><br>
  <button onclick="login()">Login</button>
</div>

<!-- BLOG AREA -->
<div id="blogBox" style="display:none;">
  <button onclick="logout()">Logout</button>
  <h3>Add New Post</h3>
  <input id="title" placeholder="Title"><br>
  <textarea id="content" placeholder="Content"></textarea><br>
  <button onclick="addPost()">Add Post</button>

  <h3>All Posts</h3>
  <div id="posts"></div>
</div>

<script>
const USER = { username: "admin", password: "123" };

function login() {
  let u = document.getElementById("username").value;
  let p = document.getElementById("password").value;
  if (u === USER.username && p === USER.password) {
    localStorage.setItem("loggedIn", "true");
    showBlog();
  } else {
    alert("Invalid login!");
  }
}

function logout() {
  localStorage.removeItem("loggedIn");
  location.reload();
}

function showBlog() {
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("blogBox").style.display = "block";
  displayPosts();
}

function addPost() {
  const title = document.getElementById("title").value;
  const content = document.getElementById("content").value;
  if (!title || !content) return alert("Enter title and content!");

  const posts = JSON.parse(localStorage.getItem("posts") || "[]");
  posts.push({ title, content });
  localStorage.setItem("posts", JSON.stringify(posts));
  document.getElementById("title").value = "";
  document.getElementById("content").value = "";
  displayPosts();
}

function editPost(index) {
  const posts = JSON.parse(localStorage.getItem("posts") || "[]");
  const newTitle = prompt("Edit title:", posts[index].title);
  const newContent = prompt("Edit content:", posts[index].content);
  if (newTitle && newContent) {
    posts[index] = { title: newTitle, content: newContent };
    localStorage.setItem("posts", JSON.stringify(posts));
    displayPosts();
  }
}

function deletePost(index) {
  const posts = JSON.parse(localStorage.getItem("posts") || "[]");
  if (confirm("Delete this post?")) {
    posts.splice(index, 1);
    localStorage.setItem("posts", JSON.stringify(posts));
    displayPosts();
  }
}

function displayPosts() {
  const posts = JSON.parse(localStorage.getItem("posts") || "[]");
  const container = document.getElementById("posts");
  container.innerHTML = "";
  posts.forEach((p, i) => {
    container.innerHTML += `
      <div>
        <h4>${p.title}</h4>
        <p>${p.content}</p>
        <button onclick="editPost(${i})">Edit</button>
        <button onclick="deletePost(${i})">Delete</button>
      </div>`;
  });
}

if (localStorage.getItem("loggedIn")) showBlog();
</script>

</body>
</html>
